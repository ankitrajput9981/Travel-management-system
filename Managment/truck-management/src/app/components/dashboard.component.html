<div class="dashboard-container">
  <h2>Truck Fleet Dashboard</h2>
  
  <!-- Overall Statistics -->
  <div class="overall-stats-section">
    <h3>Fleet Overview</h3>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üöõ</div>
        <div class="stat-content">
          <div class="stat-value">{{ overallStats.totalTrucks }}</div>
          <div class="stat-label">Total Trucks</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-content">
          <div class="stat-value">{{ overallStats.totalTrips }}</div>
          <div class="stat-label">Total Trips</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üõ£Ô∏è</div>
        <div class="stat-content">
          <div class="stat-value">{{ overallStats.totalKilometers | number:'1.0-0' }}</div>
          <div class="stat-label">Total KM</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-content">
          <div class="stat-value revenue">{{ formatCurrency(overallStats.totalRevenue) }}</div>
          <div class="stat-label">Total Revenue</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üí∏</div>
        <div class="stat-content">
          <div class="stat-value cost">{{ formatCurrency(overallStats.totalCost) }}</div>
          <div class="stat-label">Trip Costs</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìÖ</div>
        <div class="stat-content">
          <div class="stat-value cost">{{ formatCurrency(overallStats.totalMonthlyExpenses) }}</div>
          <div class="stat-label">Monthly Expenses</div>
        </div>
      </div>
      
      <div class="stat-card profit-card">
        <div class="stat-icon">üìà</div>
        <div class="stat-content">
          <div class="stat-value" [class]="getOverallNetProfit() >= 0 ? 'profit' : 'loss'">
            {{ formatCurrency(getOverallNetProfit()) }}
          </div>
          <div class="stat-label">Net Profit</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Individual Truck Performance -->
  <div class="truck-performance-section" *ngIf="truckSummaries.length > 0">
    <h3>Individual Truck Performance</h3>
    <div class="trucks-grid">
      <div *ngFor="let summary of truckSummaries" class="truck-card">
        <div class="truck-header">
          <h4>{{ summary.truckNumber }}</h4>
          <div class="truck-status" [class]="getTruckNetProfit(summary) >= 0 ? 'profitable' : 'loss'">
            {{ getTruckNetProfit(summary) >= 0 ? 'Profitable' : 'Loss' }}
          </div>
        </div>
        
        <div class="truck-metrics">
          <div class="metric">
            <span class="metric-label">Trips:</span>
            <span class="metric-value">{{ summary.totalTrips }}</span>
          </div>
          
          <div class="metric">
            <span class="metric-label">KM:</span>
            <span class="metric-value">{{ summary.totalKilometers | number:'1.0-0' }}</span>
          </div>
          
          <div class="metric">
            <span class="metric-label">Revenue:</span>
            <span class="metric-value revenue">{{ formatCurrency(summary.totalRevenue) }}</span>
          </div>
          
          <div class="metric">
            <span class="metric-label">Trip Costs:</span>
            <span class="metric-value cost">{{ formatCurrency(summary.totalCost) }}</span>
          </div>
          
          <div class="metric">
            <span class="metric-label">Monthly Expenses:</span>
            <span class="metric-value cost">{{ formatCurrency(getTruckMonthlyExpenses(summary.truckNumber)) }}</span>
          </div>
          
          <div class="metric">
            <span class="metric-label">Trip Profit:</span>
            <span class="metric-value" [class]="summary.totalProfit >= 0 ? 'profit' : 'loss'">
              {{ formatCurrency(summary.totalProfit) }}
            </span>
          </div>
          
          <div class="metric">
            <span class="metric-label">Avg Profit/KM:</span>
            <span class="metric-value" [class]="summary.averageProfitPerKm >= 0 ? 'profit' : 'loss'">
              {{ formatCurrency(summary.averageProfitPerKm) }}
            </span>
          </div>
          
          <div class="metric net-profit">
            <span class="metric-label">Net Profit:</span>
            <span class="metric-value" [class]="getTruckNetProfit(summary) >= 0 ? 'profit' : 'loss'">
              {{ formatCurrency(getTruckNetProfit(summary)) }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Trips -->
  <div class="recent-trips-section" *ngIf="trucks.length > 0">
    <h3>Recent Trips</h3>
    <div class="table-container">
      <table class="recent-trips-table">
        <thead>
          <tr>
            <th>Truck #</th>
            <th>Driver</th>
            <th>Date</th>
            <th>Location</th>
            <th>KM</th>
            <th>Revenue</th>
            <th>Cost</th>
            <th>Profit</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let truck of trucks.slice(-10).reverse()">
            <td class="truck-number">{{ truck.truckNumber }}</td>
            <td>{{ truck.driverName }}</td>
            <td>{{ truck.date | date:'shortDate' }}</td>
            <td>{{ truck.location }}</td>
            <td>{{ truck.kilometers | number:'1.0-0' }}</td>
            <td class="revenue">{{ formatCurrency(truck.totalRevenue) }}</td>
            <td class="cost">{{ formatCurrency(truck.totalCost) }}</td>
            <td [class]="truck.profit >= 0 ? 'profit' : 'loss'">
              {{ formatCurrency(truck.profit) }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div *ngIf="trucks.length === 0" class="no-data">
    <div class="no-data-content">
      <h3>üöõ No Truck Data Yet</h3>
      <p>Start by adding some truck trips to see your dashboard!</p>
      <p>Go to the "Add Trip Data" tab to get started.</p>
    </div>
  </div>
</div>
